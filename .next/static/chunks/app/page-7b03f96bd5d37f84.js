(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{3799:function(A,e,a){Promise.resolve().then(a.bind(a,7545))},7545:function(A,e,a){"use strict";a.d(e,{default:function(){return n}});var t=a(7437),l=a(2265);function n(){let[A,e]=(0,l.useState)("upload"),[n,i]=(0,l.useState)(null),[r,o]=(0,l.useState)(null),[s,c]=(0,l.useState)(!1),[d,u]=(0,l.useState)(""),[h,m]=(0,l.useState)("roast"),[g,p]=(0,l.useState)("Z Kuşağı / Eğlenceli"),[f,y]=(0,l.useState)(!0),[x,b]=(0,l.useState)(""),[k,v]=(0,l.useState)(null),[j,W]=(0,l.useState)(!1),w=(0,l.useRef)(null),z=(0,l.useRef)(null),[S,P]=(0,l.useState)("");if((0,l.useEffect)(()=>{(async()=>{let A="AIzaSyBXpV6bBXToBhCwwHUoY8J42QTH426SzHM";if(console.log("API Key status:",A?"Available":"Missing",A?A.substring(0,10)+"...":"None"),A&&""!==A.trim())try{let{GoogleGenAI:e}=await a.e(19).then(a.bind(a,954)),t=new e({apiKey:A});v(t),b(""),console.log("GoogleGenAI successfully initialized with dynamic import")}catch(A){console.error("GoogleGenAI initialization error:",A),b("API anahtarı ge\xe7ersiz: "+A.message)}else b("API anahtarı bulunamadı");W(!0)})()},[]),!j)return(0,t.jsxs)("div",{className:"panel active",children:[(0,t.jsx)("h2",{children:"Y\xfckleniyor..."}),(0,t.jsx)("p",{children:"AI sistemi hazırlanıyor..."})]});if(x)return(0,t.jsxs)("div",{className:"panel active",children:[(0,t.jsx)("h2",{children:"⚠️ API Hatası"}),(0,t.jsx)("p",{children:"API anahtarı ile ilgili bir sorun var:"}),(0,t.jsx)("pre",{style:{background:"#2a2a2a",padding:"1rem",borderRadius:"8px",overflow:"auto",color:"#ff6b6b"},children:x}),(0,t.jsx)("p",{children:"L\xfctfen .env.local dosyanızda doğru API anahtarı olduğundan emin olun:"}),(0,t.jsx)("pre",{style:{background:"#2a2a2a",padding:"1rem",borderRadius:"8px",overflow:"auto"},children:"NEXT_PUBLIC_GEMINI_API_KEY=your_valid_api_key_here"}),(0,t.jsxs)("p",{children:["API anahtarı almak i\xe7in: ",(0,t.jsx)("a",{href:"https://aistudio.google.com/app/apikey",target:"_blank",rel:"noopener noreferrer",style:{color:"var(--primary-color)"},children:"Google AI Studio"})]}),(0,t.jsx)("button",{onClick:()=>window.location.reload(),style:{marginTop:"1rem"},children:"Sayfayı Yenile"})]});let B=A=>new Promise(e=>{let a=new FileReader;a.onload=a=>{var t;e({inlineData:{data:(null===(t=a.target)||void 0===t?void 0:t.result).split(",")[1],mimeType:A.type}})},a.readAsDataURL(A)}),I=A=>{i(A),e("options")},E=async()=>{if(!n||s||!k){k||b("AI sistemi hazır değil!");return}c(!0),u("YZ stilist hazırlanıyor...");try{let A="Sen T\xfcrk\xe7e konuşan, esprili bir internet kişiliğine sahip bir moda stilistisin. Girdi g\xf6r\xfcnt\xfcs\xfcndeki kıyafeti analiz et ve KESİN JSON formatında bir yanıt d\xf6nd\xfcr. JSON yanıtındaki T\xdcM metin değerleri T\xdcRK\xc7E olmalıdır.\n\nKullanıcı şu ayarları se\xe7ti: mod: '".concat(h,"' ve ton: '").concat(g,"'.\n\n'roast' modu se\xe7ildiyse ('Yorumla' anlamına gelir) esprili ve zararsız ol. 'compliment' modu se\xe7ildiyse ('\xd6v' anlamına gelir) pozitif ve teşvik edici ol.\n\nKurallar: Kısa ve \xf6z ol. Asla y\xfczlerden, v\xfccut şekillerinden veya hassas \xf6zelliklerden bahsetme. Yalnızca kıyafetlere, renklere, kalıba ve aksesuarlara odaklan."),a=await fetch(n),t=await a.blob(),l=await B(new File([t],"user-image.jpg",{type:t.type}));u("Renkler, desenler ve tarz analiz ediliyor..."),console.log("API \xe7ağrısı başlatılıyor...",{model:"gemini-2.5-flash",promptLength:A.length,hasImagePart:!!l,mode:h,tone:g});let i=await k.models.generateContent({model:"gemini-1.5-flash",contents:{parts:[l,{text:A}]},config:{responseMimeType:"application/json",responseSchema:{type:"object",properties:{score:{type:"integer",description:"Outfit score from 0-100"},style_persona:{type:"string",description:"e.g., 'Neo Minimalist', 'Street Tech'"},one_liner:{type:"string",description:"Catchy headline, max 90 chars"},mode:{type:"string",enum:["roast","compliment"]},body:{type:"string",description:"2 short sentences, fun but respectful commentary"},tips:{type:"array",items:{type:"string"},description:"3 short bullet points for improvement or styling"},hashtags:{type:"array",items:{type:"string"},description:"5 lower-case tags without '#', e.g., 'streetwear','ootd'"}},required:["score","style_persona","one_liner","mode","body","tips","hashtags"]}}});console.log("API yanıtı alındı:",i),u("Skor kartın son haline getiriliyor..."),console.log("Raw response text:",i.text);let r=JSON.parse(i.text);o(r),await _(n,r,f),e("result")}catch(e){console.error("Error analyzing outfit:",e);let A="\xdczg\xfcn\xfcz, YZ stilist şu anda meşgul.";e instanceof Error&&(console.log("Detaylı hata:",e.message),A=e.message.includes("API_KEY")||e.message.includes("api key")?"API anahtarı sorunu: "+e.message:e.message.includes("quota")||e.message.includes("limit")?"API kotası aşıldı. Biraz bekleyip tekrar deneyin.":e.message.includes("network")||e.message.includes("fetch")?"İnternet bağlantısı sorunu. Bağlantınızı kontrol edin.":e.message.includes("rate")?"\xc7ok hızlı istek g\xf6nderiliyor. 30 saniye bekleyip tekrar deneyin.":e.message.includes("SAFETY")?"G\xf6rsel i\xe7erik g\xfcvenlik filtrelerine takıldı. Başka bir g\xf6rsel deneyin.":e.message.includes("400")?"Ge\xe7ersiz istek. G\xf6rsel formatını kontrol edin.":"AI analiz hatası: ".concat(e.message)),alert(A+" (Detaylı hata console'da g\xf6r\xfclebilir)")}finally{c(!1),u("")}},C=A=>{let e=document.createElement("canvas"),a=e.getContext("2d",{willReadFrequently:!0});if(!a)return{r:20,g:20,b:20};let t=e.width=A.width,l=e.height=A.height;a.drawImage(A,0,0,t,l);let n=a.getImageData(0,0,t,l).data,i=0,r=0,o=0;for(let A=0;A<n.length;A+=40)i+=n[A],r+=n[A+1],o+=n[A+2];let s=n.length/40;return{r:Math.floor(i/s),g:Math.floor(r/s),b:Math.floor(o/s)}},T=(A,e,a)=>(.299*A+.587*e+.114*a)/255>.5?"#000000":"#FFFFFF",N=(A,e,a,t,l,n)=>{let i=e.split(" "),r="",o=t;for(let e=0;e<i.length;e++){let t=r+i[e]+" ";A.measureText(t).width>l&&e>0?(A.fillText(r.trim(),a,o),r=i[e]+" ",o+=n):r=t}return r.trim()&&(A.fillText(r.trim(),a,o),o+=n),o},_=async(A,e,a)=>{let t=z.current;if(!t){console.error("Canvas not found");return}let l=t.getContext("2d");if(!l)return;let n=new Image;return n.crossOrigin="anonymous",new Promise(a=>{n.onload=()=>{let A,t,i,r;n.width/n.height>.8?(i=.8*(r=n.height),A=(n.width-i)/2,t=0):(r=(i=n.width)/.8,A=0,t=(n.height-r)/2),l.drawImage(n,A,t,i,r,0,0,1080,1350);let o=C(n),s=T(o.r,o.g,o.b);l.fillStyle="rgba(".concat(o.r,", ").concat(o.g,", ").concat(o.b,", 0.9)"),l.beginPath(),l.moveTo(0,1350-742.5000000000001+40),l.arcTo(0,1350-742.5000000000001,40,1350-742.5000000000001,40),l.lineTo(1040,1350-742.5000000000001),l.arcTo(1080,1350-742.5000000000001,1080,1350-742.5000000000001+40,40),l.lineTo(1080,1350),l.lineTo(0,1350),l.closePath(),l.fill(),l.fillStyle=s,l.font="bold 42px Arial",l.textAlign="left";let c=1350-742.5000000000001+70;l.fillText(e.style_persona.toUpperCase(),60,c),c+=70,l.font="bold 58px Arial",c=N(l,'"'.concat(e.one_liner,'"'),60,c,960,70)+25,l.font="36px Arial",c=N(l,e.body,60,c,960,50)+25,l.font="bold 36px Arial",l.fillText("İpu\xe7ları:",60,c),c+=50,l.font="32px Arial",e.tips.slice(0,3).forEach((A,e)=>{c=N(l,"• ".concat(A),60,c,960,45),e<2&&(c+=15)}),l.font="28px Arial",l.fillStyle="#000000"===s?"rgba(0,0,0,0.6)":"rgba(255,255,255,0.6)";let d=e.hashtags.slice(0,5).map(A=>"#".concat(A)).join(" ");l.fillText(d,60,1310);let u=1350-742.5000000000001+80+20;l.beginPath(),l.arc(940,u,80,0,2*Math.PI),l.fillStyle=s,l.fill(),l.font="bold 72px Arial",l.fillStyle="rgb(".concat(o.r,", ").concat(o.g,", ").concat(o.b,")"),l.textAlign="center",l.textBaseline="middle",l.fillText(e.score.toString(),940,u),l.font="24px Arial",l.fillStyle=s,l.textAlign="right",l.globalAlpha=.7,l.fillText("fitimiyorumla.ai",1020,1350-742.5000000000001-20),l.globalAlpha=1,l.textBaseline="alphabetic",a()},n.src=A})},G=()=>{let A=new URL(window.location.href),e=A.searchParams.get("ref"),a=new URL(A.origin+A.pathname);return a.searchParams.set("utm_source","share"),a.searchParams.set("utm_medium","card"),a.searchParams.set("utm_campaign","launch1"),e&&a.searchParams.set("ref",e),a.toString()},D=async()=>{try{await navigator.clipboard.writeText(G()),P("Bağlantı kopyalandı! ✓"),setTimeout(()=>P(""),2e3)}catch(A){alert("Bağlantı kopyalanamadı.")}},M=async()=>{if(!r)return;let A="Benim kombinim ".concat(r.score,"/100 puan aldı – ").concat(r.one_liner,". Sen de dene: ").concat(G()," #").concat(r.hashtags.join(" #"));try{await navigator.clipboard.writeText(A),P("A\xe7ıklama kopyalandı! ✓"),setTimeout(()=>P(""),2e3)}catch(A){alert("A\xe7ıklama kopyalanamadı.")}},Q=async()=>{let A=z.current;if(!A||!("share"in navigator)){alert("Tarayıcınız Paylaşım API'sini desteklemiyor. Bunun yerine bağlantıyı kopyalamayı deneyin.");return}A.toBlob(async A=>{if(!A)return;let e=new File([A],"fitimiyorumla-skorkarti.png",{type:"image/png"}),a={title:"Fit'imi Yorumla Skor Kartı",text:"Kombinim ".concat(null==r?void 0:r.score,"/100 puan aldı! Skor kartıma bir g\xf6z at."),files:[e],url:G()};if(navigator.canShare(a))try{await navigator.share(a)}catch(A){console.error("Paylaşım başarısız oldu",A)}},"image/png")};return(0,t.jsxs)("div",{id:"app",children:[(0,t.jsxs)("section",{className:"panel ".concat("upload"===A?"active":""),children:[(0,t.jsx)("h2",{children:"1. Kıyafetini Y\xfckle"}),(0,t.jsxs)("div",{className:"upload-area",children:[(0,t.jsx)("input",{type:"file",ref:w,accept:"image/*",hidden:!0,onChange:A=>{var e;let a=null===(e=A.target.files)||void 0===e?void 0:e[0];a&&I(URL.createObjectURL(a))}}),(0,t.jsx)("label",{className:"upload-label",role:"button",tabIndex:0,onClick:()=>{var A;return null===(A=w.current)||void 0===A?void 0:A.click()},children:(0,t.jsx)("span",{children:"\uD83D\uDCF7 Fotoğraf Se\xe7"})}),(0,t.jsx)("p",{children:"veya"}),(0,t.jsx)("button",{onClick:()=>{I("data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/2wBDAAYEBAUEBAYFBQUGBgYHCQ4JCQgICRINDQoOFRIWFhUSFBQXGI_W19fW19fW19fW19fW19fW19fW19fW19fW19fW19fW19fW19fW19fW19fW19fW19fW19fW19fW19fW19fW19fW19fW19fW19fW19fW19fW19fW19fW19fW19fW19fW19fW19fW19fW19fW19fW19fW19fW19fW19fW19fW19fW19fW19fW19fW19fW19fW19fW19fW19fW19fW19fW19fW1//AABEIASwDIAMBIgACEQEDEQH/xAC7AAEAAgMBAQEAAAAAAAAAAAAABgcEBQgDAgEBAQEBAQEAAAAAAAAAAAAAAAECAwT/2gAMAwEAAhADEAAAAP2oAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArz0AAAAAAAAAAAAAAAAAAAAAAACMlU5gAAAAAAAAAAAAAAAAAAAAAACnNAg9AAAAAAAAAAAAAAAAAAAAAABXisTzQAAAAAAAAAAAAAAAAAAAAAAEGejPQAAAAAAAAAAAAAAAAAAAAAAZ6M9AAAAAAAAAAAAAAAAAAAAAABnoz0AAAAAAAAAAAAAAAAAAAAAAGejPQAAAAAAAAAAAAAAAAAAAAAAZ6M9AAAAAAAAAAAAAAAAAAAAAABnoz0AAAAAAAAAAAAAAAAAAAAAAGejPQAAAAAAAAAAAAAAAAAAAAAAZ6M9AAAAAAAAAAAAAAAAAAAAAABnoz0AAAAAAAAAAAAAAAAAAAAAAGejPQAAAAAAAAAAAAAAAAAAAAAAZ6M9AAAAAAAAAAAAAAAAAAAAAABnoz0AAAAAAAAAAAAAAAAAAAAAAGejPQAAAAAAAAAAAAAAAAAAAAAAZ6M9AAAAAAAAAAAAAAAAAAAAAABnoz0AAAAAAAAAAAAAAAAAAAAAAGejPQAAAAAAAAAAAAAAAAAAAAAAZ6M9AAAAAAAAAAAAAAAAAAAAAABnoz0AAAAAAAAAAAAAAAAAAAAAAGejPQAAAAAAAAAAAAAAAAAAAAAAZ6M9AAAAAAAAAAAAAAAAAAAAAABnoz0AAAAAAAAAAAAAAAAAAAAAAGejPQAAAAAAAAAAAAAAAAAAAAAAZ6M9AAAAAAAAAAAAAAAAAAAAAAA=")},children:"Demo G\xf6rseli Dene"})]}),n&&(0,t.jsxs)("div",{id:"image-preview-container",children:[(0,t.jsx)("img",{id:"image-preview",src:n,alt:"Y\xfcklediğiniz g\xf6rsel"}),(0,t.jsx)("button",{className:"secondary",onClick:()=>{i(null),e("upload"),w.current&&(w.current.value="")},children:"G\xf6rseli Değiştir"})]})]}),(0,t.jsxs)("section",{className:"panel ".concat("options"===A?"active":""),children:[(0,t.jsx)("h2",{children:"2. Tarzını Belirle"}),(0,t.jsxs)("div",{className:"option-group",children:[(0,t.jsx)("label",{children:"Mod"}),(0,t.jsxs)("div",{className:"toggle-switch",children:[(0,t.jsx)("input",{type:"radio",id:"mode-roast",name:"mode",value:"roast",checked:"roast"===h,onChange:A=>m(A.target.value)}),(0,t.jsx)("label",{htmlFor:"mode-roast",children:"Yorumla \uD83D\uDD25"}),(0,t.jsx)("input",{type:"radio",id:"mode-compliment",name:"mode",value:"compliment",checked:"compliment"===h,onChange:A=>m(A.target.value)}),(0,t.jsx)("label",{htmlFor:"mode-compliment",children:"\xd6v ✨"})]})]}),(0,t.jsxs)("div",{className:"option-group",children:[(0,t.jsx)("label",{htmlFor:"tone-select",children:"Ton"}),(0,t.jsxs)("select",{id:"tone-select",value:g,onChange:A=>p(A.target.value),children:[(0,t.jsx)("option",{value:"Z Kuşağı / Eğlenceli",children:"Z Kuşağı / Eğlenceli"}),(0,t.jsx)("option",{value:"N\xf6tr / Arkadaş\xe7a",children:"N\xf6tr / Arkadaş\xe7a"}),(0,t.jsx)("option",{value:"Profesyonel Stilist",children:"Profesyonel Stilist"})]})]}),(0,t.jsxs)("div",{className:"option-group privacy",children:[(0,t.jsx)("input",{type:"checkbox",id:"blur-face-check",checked:f,onChange:A=>y(A.target.checked)}),(0,t.jsx)("label",{htmlFor:"blur-face-check",children:"Gizlilik i\xe7in y\xfcz\xfc buğula"})]}),(0,t.jsx)("button",{onClick:E,disabled:!n||s||!k,children:s?"Analiz ediliyor...":"Kıyafeti Analiz Et"}),x&&(0,t.jsx)("div",{style:{marginTop:"1rem",padding:"0.75rem",backgroundColor:"#ff4444",color:"white",borderRadius:"8px"},children:x})]}),(0,t.jsxs)("section",{className:"panel ".concat("result"===A?"active":""),children:[(0,t.jsx)("h2",{children:"3. Skor Kartın"}),(0,t.jsxs)("div",{id:"canvas-container",children:[(0,t.jsx)("canvas",{id:"scorecard-canvas",ref:z,width:"1080",height:"1350"}),s&&(0,t.jsxs)("div",{className:"loading-overlay",children:[(0,t.jsx)("div",{className:"spinner"}),(0,t.jsx)("p",{children:"Analiz ediliyor... bu biraz zaman alabilir."}),(0,t.jsx)("p",{className:"loading-message",children:d})]})]}),(0,t.jsxs)("div",{className:"action-buttons",children:[(0,t.jsx)("button",{onClick:()=>{let A=z.current;if(!A)return;let e=document.createElement("a");e.download="fitimiyorumla-skorkarti.png",e.href=A.toDataURL("image/png"),e.click()},children:"PNG Olarak İndir"}),(0,t.jsx)("button",{onClick:Q,children:"Paylaş"})]}),(0,t.jsxs)("div",{className:"copy-buttons",children:[(0,t.jsx)("button",{onClick:D,children:"Bağlantıyı Kopyala"}),(0,t.jsx)("button",{onClick:M,children:"A\xe7ıklamayı Kopyala"})]}),S&&(0,t.jsx)("div",{style:{textAlign:"center",padding:"0.5rem",backgroundColor:"var(--secondary-color)",color:"#000",borderRadius:"8px",marginBottom:"1rem",fontWeight:"bold"},children:S}),(0,t.jsx)("button",{className:"secondary",onClick:()=>{i(null),o(null),e("upload"),b(""),P(""),w.current&&(w.current.value="")},children:"Baştan Başla"})]})]})}}},function(A){A.O(0,[971,23,744],function(){return A(A.s=3799)}),_N_E=A.O()}]);